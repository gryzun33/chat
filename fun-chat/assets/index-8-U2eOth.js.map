{"version":3,"file":"index-8-U2eOth.js","sources":["../../src/app/components/EventEmitter.ts","../../src/app/components/View/BaseComponent.ts","../../src/app/components/Storage.ts","../../src/app/components/Router.ts","../../src/app/components/WebSocketManager.ts","../../src/app/utils/types.ts","../../src/app/utils/helpers.ts","../../src/app/components/State.ts","../../src/app/components/ErrorHandler.ts","../../src/app/components/DataHandler.ts","../../src/app/components/Controller.ts","../../src/app/components/View/Button.ts","../../src/app/components/View/InputField.ts","../../src/app/components/View/Modal.ts","../../src/app/components/View/ModalLogin.ts","../../src/app/components/View/LoginPage.ts","../../src/app/utils/icons.ts","../../src/app/components/View/Header.ts","../../src/app/components/View/Footer.ts","../../src/app/components/View/Users.ts","../../src/app/components/View/ContextMenu.ts","../../src/app/components/View/Message.ts","../../src/app/components/View/Dialog.ts","../../src/app/components/View/NewMessage.ts","../../src/app/components/View/MainPage.ts","../../src/app/components/View/AboutPage.ts","../../src/app/components/View/ModalServer.ts","../../src/app/components/App.ts","../../src/index.ts"],"sourcesContent":["import { Listener } from '../utils/types';\n\nclass EventEmitter {\n  private listeners: { [event: string]: Listener[] } = {};\n\n  public on(event: string, listener: Listener): () => void {\n    if (!this.listeners[event]) {\n      this.listeners[event] = [];\n    }\n    this.listeners[event].push(listener);\n\n    return (): void => {\n      this.off(event, listener);\n    };\n  }\n\n  public off(event: string, listener: Listener): void {\n    if (this.listeners[event]) {\n      this.listeners[event] = this.listeners[event].filter((l) => l !== listener);\n    }\n  }\n\n  public emit(event: string, ...args: unknown[]): void {\n    const eventListeners = this.listeners[event];\n    if (eventListeners) {\n      eventListeners.forEach((listener) => {\n        listener(...args);\n      });\n    }\n  }\n}\nconst emitter = new EventEmitter();\n\nexport default emitter;\n","import { Props, Handler, Listener } from '../../utils/types';\nimport emitter from '../EventEmitter';\n\ntype Unsubscriber = () => void;\n\nexport default class BaseComponent<T extends HTMLElement = HTMLElement> {\n  public element: T;\n  public children: BaseComponent[] = [];\n\n  protected handlers: Handler[] = [];\n\n  protected emitterMap: Map<string, Listener> = new Map();\n\n  protected unsubscribes: Unsubscriber[] = [];\n\n  constructor(props: Props) {\n    this.element = document.createElement(props.tag || 'div') as T;\n    this.addClasses(props.classNames);\n    if (props.text !== null) {\n      this.setTextContent(props.text);\n    }\n    // this.children = [];\n  }\n\n  protected addUnsubscribers() {\n    this.emitterMap.forEach((listener, eventName) => {\n      this.unsubscribes.push(emitter.on(eventName, listener));\n    });\n  }\n  public getElement() {\n    return this.element;\n  }\n\n  public getChildren() {\n    return this.children;\n  }\n\n  public addClasses(cssClasses: string[] = []): void {\n    cssClasses.map((cssClass) => this.element.classList.add(cssClass));\n  }\n\n  public setTextContent(text: string = ''): void {\n    this.element.textContent = text;\n  }\n\n  public getTextContent() {\n    return this.element.textContent;\n  }\n\n  public addClass(className: string): void {\n    this.element.classList.add(className);\n  }\n\n  public toggleClass(className: string): void {\n    this.element.classList.toggle(className);\n  }\n\n  public removeClass(className: string): void {\n    this.element.classList.remove(className);\n  }\n\n  public append(...compChildren: BaseComponent[]): void {\n    compChildren.forEach((child) => {\n      if (child instanceof BaseComponent) {\n        this.element.append(child.element);\n        this.children.push(child);\n      }\n    });\n  }\n\n  public insertBefore(newComp: BaseComponent, child: BaseComponent, index: number) {\n    this.element.insertBefore(newComp.element, child.element);\n    this.children[index] = newComp;\n  }\n\n  public attr(name: string, value?: string) {\n    if (value) {\n      this.element.setAttribute(name, value);\n      // return this;\n    }\n    return this.element.getAttribute(name);\n  }\n\n  public removeAttr(name: string) {\n    this.element.removeAttribute(name);\n  }\n\n  public css(prop: string, value: string) {\n    this.element.style.setProperty(prop, value);\n  }\n\n  public findAll(selector: string) {\n    return [...this.element.querySelectorAll(selector)];\n  }\n\n  public closest(selector: string) {\n    return this.element.closest(selector);\n  }\n\n  public on(eventType: string, callback: (event: Event) => void) {\n    this.element.addEventListener(eventType, callback);\n    this.handlers.push({ eventType, callback });\n  }\n\n  public off(eventType: string, callback: (event: Event) => void) {\n    this.element.removeEventListener(eventType, callback);\n  }\n\n  public html(html: string) {\n    this.element.innerHTML = html;\n  }\n\n  public destroyChildren(): void {\n    if (this.children.length > 0) {\n      this.children.forEach((child) => {\n        child.destroy();\n      });\n      this.children.length = 0;\n    }\n  }\n\n  public destroy = (): void => {\n    this.destroyChildren();\n    this.element.remove();\n    this.deleteHandlers();\n    this.unsubscribeEmitter();\n  };\n\n  public unsubscribeEmitter(): void {\n    this.unsubscribes.forEach((unsubscriber: Unsubscriber) => {\n      unsubscriber();\n    });\n  }\n\n  public deleteHandlers(): void {\n    this.handlers.forEach((handler: Handler) => {\n      this.off(handler.eventType, handler.callback);\n    });\n  }\n}\n","export class StorageService<T> {\n  protected keys = new Set<string>();\n  constructor(private keyPrefix: string) {}\n\n  private getStorageKey(key: string): string {\n    const resultKey = `${this.keyPrefix}_${key}`;\n    this.keys.add(resultKey);\n    return resultKey;\n  }\n\n  public saveData<K extends keyof T>(key: K, data: T[K]): void {\n    const storageKey = this.getStorageKey(key.toString());\n    sessionStorage.setItem(storageKey, JSON.stringify(data));\n  }\n\n  public getData<K extends keyof T>(key: K): T[K] | null {\n    const storageKey = this.getStorageKey(key.toString());\n    const data = sessionStorage.getItem(storageKey);\n    return data ? JSON.parse(data) : null;\n  }\n\n  public removeStorage(): void {\n    this.keys.forEach((key: string) => {\n      sessionStorage.removeItem(key);\n    });\n  }\n}\n\nexport type UserState = {\n  user: {\n    login: string;\n    password: string;\n  };\n};\n\nconst storage = new StorageService<UserState>('gryzun33-chat');\n\nexport default storage;\n","import { Route } from '../utils/types';\nimport emitter from './EventEmitter';\nimport storage from './Storage';\n\nexport default class Router {\n  private routes: Route[];\n  constructor(routes: Route[]) {\n    this.routes = routes;\n    emitter.on('navigate', this.navigate);\n    window.addEventListener('popstate', this.handleRouteChange);\n  }\n\n  public init() {\n    document.addEventListener('DOMContentLoaded', () => {\n      let path = window.location.pathname.slice(1);\n      const user = storage.getData('user');\n      // if (path === ('main' || 'login') && user) {\n      // emitter.emit('login', user.login, user.password);\n      // return;\n      // }\n      if (user) {\n        return;\n      }\n      if (path === 'main') {\n        path = 'login';\n      }\n\n      // if (path === 'main' && !user) {\n      // path = 'login';\n      // }\n      // console.log('pathhhhh=', path);\n\n      this.navigate(path);\n    });\n  }\n\n  private navigate = (url: unknown) => {\n    if (typeof url !== 'string') {\n      throw new Error('url isn`t string');\n    }\n\n    let path: string = url;\n    const isUser = storage.getData('user');\n\n    if (path === 'back') {\n      path = isUser ? 'main' : 'login';\n    }\n\n    if (path.length > 0) {\n      window.history.pushState(null, '', `/${path}`);\n    }\n\n    const route = this.routes.find((elem) => elem.path === path);\n\n    if (!route) {\n      this.navigate(this.routes[0].path);\n    } else {\n      route.callback();\n    }\n  };\n\n  protected handleRouteChange = () => {\n    console.log('popstate');\n    const path = window.location.pathname.slice(1);\n    // console.log('path2=', path);\n    this.navigate(path);\n  };\n}\n","// import storage from \"./Storage\";\n\nimport emitter from './EventEmitter';\n\ntype Handler = (arg: string) => void;\nexport default class WebSocketManager {\n  private ws?: WebSocket;\n  protected reconnectInterval: number = 1000;\n\n  protected isConnect: boolean = true;\n  constructor(\n    public dataHandler: Handler,\n    public checkAuthorized: () => void\n  ) {\n    this.connect();\n  }\n\n  connect = () => {\n    this.ws = new WebSocket('ws://localhost:4000');\n    this.ws.addEventListener('open', this.onOpen);\n    this.ws.addEventListener('message', this.onMessage);\n    this.ws.addEventListener('close', this.onClose);\n    this.ws.addEventListener('error', this.onError);\n  };\n\n  onOpen = () => {\n    this.isConnect = true;\n    emitter.emit('connect');\n    this.checkAuthorized();\n  };\n\n  onClose = () => {\n    if (this.isConnect) {\n      this.isConnect = false;\n      emitter.emit('disconnect');\n    }\n    setTimeout(() => {\n      this.connect();\n    }, this.reconnectInterval);\n  };\n\n  onMessage = (event: MessageEvent) => {\n    const { data } = event;\n    this.dataHandler(data);\n    // console.log('Message from server:', event.data);\n  };\n\n  onError = (event: Event) => {\n    console.error('WebSocket error:', event);\n\n    this.ws?.close();\n  };\n  send(message: string) {\n    console.log('send', message);\n    this.ws?.send(message);\n  }\n}\n\n// export default class WebSocketManager {\n//   private ws = new WebSocket('ws://localhost:4000');\n//   constructor(\n//     public dataHandler: Handler,\n//     public checkAuthorized: () => void\n//   ) {\n//     this.ws.addEventListener('open', this.onOpen);\n//   }\n\n//   onOpen = () => {\n//     console.log('connected');\n//     this.ws.addEventListener('message', this.onMessage);\n//     this.ws.addEventListener('close', this.onClose);\n//     this.ws.addEventListener('error', this.onError);\n\n//     this.checkAuthorized();\n//   };\n\n//   onClose = () => {\n//     console.log('disconnected');\n//   };\n\n//   onMessage = (event: MessageEvent) => {\n//     const { data } = event;\n//     this.dataHandler(data);\n//     console.log('Message from server:', event.data);\n//   };\n\n//   onError = (event: Event) => {\n//     console.error('WebSocket error:', event);\n//   };\n//   send(message: string) {\n//     console.log('send', message);\n//     this.ws.send(message);\n//   }\n// }\n\n// export default class WebSocketManager {\n//   private ws = new WebSocket('ws://localhost:4000');\n//   protected reconnectInterval: number = 1000;\n//   protected reconnectIntervalId?: number;\n//   constructor(\n//     public dataHandler: Handler,\n//     public checkAuthorized: () => void\n//   ) {\n//     this.ws.addEventListener('open', this.onOpen);\n//     this.ws.addEventListener('message', this.onMessage);\n//     this.ws.addEventListener('close', this.onClose);\n//     this.ws.addEventListener('error', this.onError);\n//   }\n\n//   onOpen = () => {\n//     console.log('connected');\n//     console.log('readystate=', this.ws.readyState);\n//     if (this.ws.readyState !== WebSocket.OPEN) {\n//       return;\n//     }\n//     clearInterval(this.reconnectIntervalId);\n//     console.log('clearinterval');\n//     this.checkAuthorized();\n//   };\n\n//   onClose = () => {\n//     console.log('disconnected');\n//     this.reconnect();\n//   };\n\n//   onMessage = (event: MessageEvent) => {\n//     const { data } = event;\n//     this.dataHandler(data);\n//     console.log('Message from server:', event.data);\n//   };\n\n//   onError = (event: Event) => {\n//     console.error('WebSocket error:', event);\n//     // this.onClose();\n//   };\n//   send(message: string) {\n//     console.log('send', message);\n//     this.ws.send(message);\n//   }\n\n//   reconnect = () => {\n//     this.reconnectIntervalId = setInterval(() => {\n//       this.ws = new WebSocket('ws://localhost:4000');\n//       console.log('readystate=', this.ws.readyState);\n//     }, this.reconnectInterval);\n//   };\n// }\n","export type Props = {\n  tag?: keyof HTMLElementTagNameMap;\n  classNames?: string[];\n  text?: string;\n  callback?: () => void;\n};\n\nexport type Listener = (...args: unknown[]) => void;\n\nexport type Handler = {\n  eventType: string;\n  callback: (event: Event) => void;\n};\n\nexport type Route = {\n  path: string;\n  callback: () => void;\n};\n\nexport type ButtonProps = Omit<Props, 'tag'> & {\n  type?: string;\n  disabled?: boolean;\n};\n\nexport type InputProps = Omit<Props, 'tag'> & {\n  type: string;\n  placeholder?: string;\n  required?: boolean;\n  minlength: string;\n  pattern: string;\n  toolTip: string;\n  label: string;\n  autocomplete?: string;\n};\n\nexport type CurrentUser = {\n  id: string;\n  login: string;\n  password: string;\n};\n\nexport type UserResponse = {\n  login: string;\n  isLogined: boolean;\n};\n\nexport type User = UserResponse & {\n  notification?: number;\n};\n\nexport type MessageResponse = {\n  id: string;\n  from: string;\n  to: string;\n  text: string;\n  datetime: number;\n  status: {\n    isDelivered: boolean;\n    isReaded: boolean;\n    isEdited: boolean;\n  };\n};\n\nexport type MessageProps = {\n  id: string;\n  text: string;\n  status: string;\n  date: string;\n  author: boolean;\n  dialogUser: string;\n};\n\nexport enum MessageStatus {\n  Sent = 'sent',\n  Delivered = 'delivered',\n  Readed = 'readed',\n  Edited = 'edited',\n}\n\nexport type StatusResponse = {\n  isDelivered: boolean;\n  isReaded: boolean;\n  isEdited: boolean;\n};\n","import { MessageProps } from './types';\n\nfunction formatDate(timestamp: number) {\n  const date = new Date(timestamp);\n  const day = String(date.getDate()).padStart(2, '0');\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const year = date.getFullYear();\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  const seconds = String(date.getSeconds()).padStart(2, '0');\n\n  return `${day}.${month}.${year}, ${hours}:${minutes}:${seconds}`;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction isMessageProps(obj: any): obj is MessageProps {\n  return (\n    typeof obj === 'object' &&\n    typeof obj.id === 'string' &&\n    typeof obj.text === 'string' &&\n    typeof obj.status === 'string' &&\n    typeof obj.date === 'string' &&\n    typeof obj.author === 'boolean' &&\n    typeof obj.dialogUser === 'string'\n  );\n}\n\nexport { formatDate, isMessageProps };\n","import {\n  CurrentUser,\n  UserResponse,\n  MessageResponse,\n  MessageStatus,\n  StatusResponse,\n} from '../utils/types';\nimport storage from './Storage';\nimport emitter from './EventEmitter';\nimport { formatDate } from '../utils/helpers';\n\n// type Users = User[];\n\ntype UserData = {\n  notifications: number;\n  isLogined: boolean;\n};\n\n// enum Status {\n//   Sent = 'sent',\n//   Delivered = 'delivered',\n//   Readed = 'readed',\n//   Edited = 'edited',\n// }\n\nclass State {\n  // protected login: string = '';\n  // protected password: string = '';\n  // public users: User[] = [];\n  // public activeUser:User = {};\n  public usersMap: Map<string, UserData> = new Map();\n  public messagesMap: Map<string, MessageResponse> = new Map();\n  protected currUser: CurrentUser = {\n    id: '',\n    login: '',\n    password: '',\n  };\n\n  protected dialogUser: UserResponse = {\n    login: '',\n    isLogined: true,\n  };\n\n  public dialogId: string = '';\n\n  constructor() {\n    const user = storage.getData('user');\n    if (user) {\n      this.currUser.login = user.login;\n      this.currUser.password = user.password;\n    }\n  }\n\n  public updateState() {\n    this.usersMap.clear();\n    this.messagesMap.clear();\n    this.dialogUser = { login: '', isLogined: true };\n  }\n\n  public saveUser(user: CurrentUser) {\n    this.currUser = { ...user };\n  }\n\n  public getUser(): CurrentUser {\n    return this.currUser;\n  }\n\n  // public setUsers(data: UserResponse[]) {\n  //   data.forEach((user) => {\n  //     this.usersMap.set(user.login, user.isLogined);\n  //   });\n\n  //   console.log('ALLUSERS=', this.usersMap);\n  // }\n\n  public changeUserStatus(user: UserResponse) {\n    // if (this.usersMap.has(user.login)) {\n    // this.usersMap.set(user.login, {notifi});\n    const userData = this.usersMap.get(user.login);\n    if (userData) {\n      userData.isLogined = user.isLogined;\n    } else {\n      this.usersMap.set(user.login, { notifications: 0, isLogined: user.isLogined });\n    }\n\n    if (user.login === this.dialogUser.login) {\n      emitter.emit('change-status', user.isLogined);\n    }\n  }\n\n  public setNotifications(login: string, notifications: number) {\n    const userData = this.usersMap.get(login);\n    if (!userData) {\n      throw new Error(`user is undefined`);\n    }\n\n    userData.notifications = notifications;\n    if (userData.isLogined) {\n      emitter.emit('external-login', login, userData.notifications);\n      console.log('external-login');\n    } else {\n      emitter.emit('external-logout', login, userData.notifications);\n      console.log('external-logout');\n    }\n\n    // emitter.emit('draw-notifications', login, userData.notifications);\n  }\n\n  // public getUserStatus(login: string): boolean {\n  //   const status = this.usersMap.get(login);\n  //   if (!status) {\n  //     throw new Error(`status is undefined`);\n  //   }\n  //   return status;\n  // }\n\n  // public deleteMessages() {\n  //   this.messagesMap.clear();\n  // }\n\n  public setDialogUser(login: string): void {\n    const userData = this.usersMap.get(login);\n    if (userData === undefined) {\n      throw new Error(`status is undefined`);\n    }\n    const { isLogined } = userData;\n\n    this.dialogUser = {\n      login,\n      isLogined,\n    };\n  }\n\n  public getDialogUser(): UserResponse {\n    return this.dialogUser;\n  }\n\n  public addMessage(msg: MessageResponse) {\n    console.log('msg98=', msg);\n    this.messagesMap.set(msg.id, msg);\n    const author = msg.from === this.currUser.login;\n    const dialogUser = msg.from;\n    const date = formatDate(msg.datetime);\n    const status = msg.status.isDelivered ? MessageStatus.Delivered : MessageStatus.Sent;\n    const msgProps = {\n      id: msg.id,\n      author,\n      dialogUser,\n      date,\n      status,\n      text: msg.text,\n    };\n    emitter.emit('add-message', msgProps);\n    if (!author) {\n      state.addNotification(msg.from);\n    }\n  }\n\n  public addMessages(msgs: MessageResponse[]) {\n    this.messagesMap.clear();\n    msgs.forEach((msg) => {\n      this.messagesMap.set(msg.id, msg);\n    });\n    const messages = msgs.map((msg) => {\n      const author = msg.from === this.currUser.login;\n      const dialogUser = msg.from;\n      const date = formatDate(msg.datetime);\n      const status = this.getStatus(msg.status);\n\n      return {\n        id: msg.id,\n        author,\n        dialogUser,\n        date,\n        status,\n        text: msg.text,\n      };\n    });\n    emitter.emit('add-messages', messages);\n  }\n\n  protected getStatus(statusResponse: StatusResponse): string {\n    let status = '';\n    status = statusResponse.isDelivered ? MessageStatus.Delivered : MessageStatus.Sent;\n    status = statusResponse.isReaded ? MessageStatus.Readed : status;\n    status = statusResponse.isEdited ? MessageStatus.Edited : status;\n    return status;\n  }\n\n  public addNotification(login: string) {\n    const userData = this.usersMap.get(login);\n    if (!userData) {\n      throw new Error(`user is undefined`);\n    }\n    userData.notifications += 1;\n    console.log('login=', login);\n    console.log('number=', userData.notifications);\n    emitter.emit('update-notifications', login, userData.notifications);\n  }\n\n  public resetNotifications() {\n    const userData = this.usersMap.get(this.dialogUser.login);\n    if (!userData) {\n      throw new Error(`user is undefined`);\n    }\n    userData.notifications = 0;\n    emitter.emit('update-notifications', this.dialogUser.login, userData.notifications);\n  }\n}\n\nconst state = new State();\nexport default state;\n","import emitter from './EventEmitter';\n\nconst ERRORS = {\n  login: 'a user with this login is already authorized',\n  password: 'incorrect password',\n};\n\nexport default class ErrorHandler {\n  public onError(text: string) {\n    switch (text) {\n      case ERRORS.login:\n        // console.log('incorrectlogin');\n        emitter.emit('incorrectAuth', ERRORS.login);\n        break;\n      case ERRORS.password:\n        // console.log('incorrectpass');\n        emitter.emit('incorrectAuth', ERRORS.password);\n        break;\n\n      default:\n        console.error('unknown error type');\n        break;\n    }\n  }\n}\n","import emitter from './EventEmitter';\nimport storage from './Storage';\nimport state from './State';\nimport ErrorHandler from './ErrorHandler';\nimport { UserResponse, MessageResponse } from '../utils/types';\n\ntype DeliveredResponse = {\n  id: string;\n  status: {\n    isDelivered: boolean;\n  };\n};\n\ntype ReadedResponse = {\n  id: string;\n  status: {\n    isReaded: boolean;\n  };\n};\n\nexport default class DataHandler {\n  protected errorHandler = new ErrorHandler();\n\n  public getData = (dataStr: string) => {\n    const data = JSON.parse(dataStr);\n    // console.log('data=', data);\n\n    switch (data.type) {\n      case 'USER_LOGIN':\n        // console.log('userlogin');\n        this.authorize(data.payload.user, data.id);\n        break;\n      case 'USER_LOGOUT':\n        // console.log('userlogout');\n        this.logoutResponse(data.payload.user);\n        break;\n      case 'USER_EXTERNAL_LOGIN':\n        // console.log('userexternallogin');\n        this.userStatusResponse(data.payload.user);\n\n        break;\n      case 'USER_EXTERNAL_LOGOUT':\n        // console.log('userexternallogout');\n        this.userStatusResponse(data.payload.user);\n        // emitter.emit('external-logout', data.payload.user.login);\n        break;\n      case 'USER_ACTIVE':\n        // console.log('useractive');\n        this.usersResponse(data.payload.users);\n        break;\n      case 'USER_INACTIVE':\n        // console.log('userinactive');\n        this.usersResponse(data.payload.users);\n        break;\n      case 'MSG_SEND':\n        console.log('MSG-SENT-RESPONSE');\n        console.log('msg=', data.payload);\n        this.messageResponse(data.payload.message);\n\n        break;\n      case 'MSG_FROM_USER':\n        // console.log('MSGFROMUSER');\n        console.log('all=', data);\n        this.messagesResponse(data.payload.messages, data.id);\n\n        break;\n      case 'MSG_DELIVER':\n        console.log('deliver');\n        this.deliverResponse(data.payload.message);\n\n        break;\n      case 'MSG_READ':\n        console.log('READ-RESPONSE');\n        console.log('messageread=', data.payload.message);\n        this.readResponse(data.payload.message);\n        break;\n      case 'MSG_EDIT':\n        console.log('edit');\n        break;\n      case 'ERROR':\n        this.errorHandler.onError(data.payload.error);\n        // console.log(data.payload.error);\n        break;\n\n      default:\n        console.error('unknown type');\n        break;\n    }\n  };\n\n  private authorize(user: UserResponse, idResponse: string) {\n    if (user.isLogined) {\n      const { id, login, password } = state.getUser();\n      if (idResponse === id) {\n        storage.saveData('user', { login, password });\n        let path = window.location.pathname.slice(1);\n        path = path === 'about' ? 'about' : 'main';\n        emitter.emit('navigate', path);\n        console.log('PATH=', path);\n      }\n    }\n  }\n\n  private logoutResponse(user: UserResponse) {\n    if (!user.isLogined) {\n      storage.removeStorage();\n      emitter.emit('navigate', 'login');\n    }\n  }\n\n  private usersResponse(users: UserResponse[]) {\n    // if (type === 'USER_ACTIVE') {\n    //\n    //   const usersWithoutCurrent: UserResponse[] = users.filter((user) => user.login !== login);\n    //   state.setUsers(usersWithoutCurrent);\n    //   emitter.emit('addUsersToList', usersWithoutCurrent);\n    //   return;\n    // }\n    // state.setUsers(users);\n    // emitter.emit('addUsersToList', users);\n    // state.setUsers(users);\n    const { login } = state.getUser();\n    users.forEach((user) => {\n      if (user.login !== login) {\n        emitter.emit('get-notifications', user.login);\n        state.changeUserStatus(user);\n      }\n    });\n  }\n\n  private userStatusResponse(user: UserResponse) {\n    emitter.emit('get-notifications', user.login);\n    state.changeUserStatus(user);\n  }\n\n  private messageResponse = (msg: MessageResponse) => {\n    state.addMessage(msg);\n  };\n\n  protected messagesResponse = (msgs: MessageResponse[], id: string) => {\n    if (id === state.dialogId) {\n      console.log('dialogID', id);\n      state.addMessages(msgs);\n      return;\n    }\n\n    const { login } = state.getUser();\n    const unReaded = msgs.filter((msg) => msg.from !== login && !msg.status.isReaded);\n    console.log('unreaded=', unReaded);\n    const notifications = unReaded.length;\n    state.setNotifications(id, notifications);\n  };\n\n  protected deliverResponse(data: DeliveredResponse) {\n    const msg = state.messagesMap.get(data.id);\n    if (!msg) {\n      throw new Error(`message is undefined`);\n    }\n    msg.status.isDelivered = true;\n    emitter.emit('delivered', data.id);\n  }\n\n  protected readResponse(data: ReadedResponse) {\n    const msg = state.messagesMap.get(data.id);\n    const { login } = state.getDialogUser();\n    if (!msg) {\n      // throw new Error(`message is undefined`);\n      return;\n    }\n    msg.status.isReaded = true;\n    if (login !== msg.from) {\n      emitter.emit('readed', data.id);\n    }\n  }\n}\n","import WebSocketManager from './WebSocketManager';\nimport DataHandler from './DataHandler';\nimport emitter from './EventEmitter';\nimport state from './State';\nimport storage from './Storage';\n\nconst REQUESTS = {\n  login: 'USER_LOGIN',\n  logout: 'USER_LOGOUT',\n  activeUsers: 'USER_ACTIVE',\n  inactiveUsers: 'USER_INACTIVE',\n  msgFromUser: 'MSG_FROM_USER',\n  messSend: 'MSG_SEND',\n  messRead: 'MSG_READ',\n};\n\ntype MsgStatusRequest = {\n  id: string | null;\n  type: string;\n  payload: {\n    message: {\n      id: string;\n    };\n  };\n};\n\ntype LoginRequest = {\n  id: string;\n  type: string;\n  payload: {\n    user: {\n      login: string;\n      password: string;\n    };\n  };\n};\n\ntype UsersRequest = {\n  id: string;\n  type: string;\n  payload: null;\n};\n\ntype MessageRequest = {\n  id: string | null;\n  type: string;\n  payload: {\n    message: {\n      to: string;\n      text: string;\n    };\n  };\n};\n\nexport default class Controller {\n  private dataHandler = new DataHandler();\n  private wsManager?: WebSocketManager;\n\n  constructor() {\n    this.wsManager = new WebSocketManager(this.dataHandler.getData, this.checkAuthorized);\n    console.log(this.wsManager);\n    emitter.on('login', this.loginRequest);\n    // emitter.on('login', this.getActiveUsersRequest);\n    // emitter.on('login', this.getInactiveUsersRequest);\n    emitter.on('logout', this.logoutRequest);\n    emitter.on('send-message', this.sendRequest);\n    emitter.on('set-dialog-user', this.dialogUserRequset);\n    emitter.on('get-notifications', this.notificationsRequest);\n    emitter.on('set-readed', this.readedRequest);\n  }\n\n  public checkAuthorized = () => {\n    state.updateState();\n    const user = storage.getData('user');\n    if (user) {\n      console.log('userfromstorage=', user);\n      const { login, password } = user;\n      this.loginRequest(login, password);\n    }\n  };\n\n  protected loginRequest = (login: unknown, password: unknown) => {\n    if (typeof login !== 'string' || typeof password !== 'string') {\n      throw new Error('login or password is not string');\n    }\n    console.log('authorize');\n    const requestId = crypto.randomUUID();\n    state.saveUser({ id: requestId, login, password });\n    const loginRequest: LoginRequest = {\n      id: requestId,\n      type: REQUESTS.login,\n      payload: {\n        user: {\n          login,\n          password,\n        },\n      },\n    };\n\n    this.wsManager?.send(JSON.stringify(loginRequest));\n    this.externalUsersRequest();\n  };\n\n  public externalUsersRequest() {\n    const activeUsersRequest = this.getUsers(REQUESTS.activeUsers);\n    const inactiveUsersRequest = this.getUsers(REQUESTS.inactiveUsers);\n    this.wsManager?.send(JSON.stringify(activeUsersRequest));\n    this.wsManager?.send(JSON.stringify(inactiveUsersRequest));\n  }\n\n  protected logoutRequest = () => {\n    const { login, password } = state.getUser();\n    const requestId = crypto.randomUUID();\n    const request: LoginRequest = {\n      id: requestId,\n      type: REQUESTS.logout,\n      payload: {\n        user: {\n          login,\n          password,\n        },\n      },\n    };\n    this.wsManager?.send(JSON.stringify(request));\n  };\n\n  protected getUsers(status: string): UsersRequest {\n    const requestId = crypto.randomUUID();\n    return {\n      id: requestId,\n      type: status,\n      payload: null,\n    };\n  }\n\n  protected dialogUserRequset = (login: unknown) => {\n    if (typeof login !== 'string') {\n      throw new Error(`login isnt't string`);\n    }\n\n    state.setDialogUser(login);\n    this.notificationsDialogRequest(login);\n  };\n\n  protected notificationsDialogRequest = (login: string) => {\n    const requestId = crypto.randomUUID();\n    state.dialogId = requestId;\n    const request = {\n      id: state.dialogId,\n      type: REQUESTS.msgFromUser,\n      payload: {\n        user: {\n          login,\n        },\n      },\n    };\n    this.wsManager?.send(JSON.stringify(request));\n  };\n\n  protected notificationsRequest = (login: unknown) => {\n    if (typeof login !== 'string') {\n      throw new Error(`login isnt't string`);\n    }\n\n    const request = {\n      id: login,\n      type: 'MSG_FROM_USER',\n      payload: {\n        user: {\n          login,\n        },\n      },\n    };\n    this.wsManager?.send(JSON.stringify(request));\n  };\n\n  protected sendRequest = (message: unknown) => {\n    if (typeof message !== 'string') {\n      throw new Error(`login isnt't string`);\n    }\n    const dialogUser = state.getDialogUser();\n    const request: MessageRequest = {\n      id: null,\n      type: REQUESTS.messSend,\n      payload: {\n        message: {\n          to: dialogUser.login,\n          text: message,\n        },\n      },\n    };\n    this.wsManager?.send(JSON.stringify(request));\n  };\n\n  protected readedRequest = () => {\n    const messages = Array.from(state.messagesMap.values());\n    // console.log(messages);\n    const messagesId = messages.filter((msg) => !msg.status.isReaded).map((msg) => msg.id);\n    console.log('readed', messagesId);\n\n    messagesId.forEach((id) => {\n      const request: MsgStatusRequest = {\n        id: '',\n        type: REQUESTS.messRead,\n        payload: {\n          message: {\n            id,\n          },\n        },\n      };\n      this.wsManager?.send(JSON.stringify(request));\n    });\n\n    state.resetNotifications();\n  };\n}\n","import BaseComponent from './BaseComponent';\nimport { ButtonProps } from '../../utils/types';\n\nexport default class Button extends BaseComponent<HTMLButtonElement> {\n  public enableState: boolean = true;\n  constructor(props: ButtonProps) {\n    super({ tag: 'button', ...props });\n    if (props.type) {\n      this.attr('type', props.type);\n    }\n    if (props.callback) {\n      this.on('click', props.callback);\n    }\n    if (props.disabled) {\n      this.disable();\n    }\n  }\n\n  public disable = (): void => {\n    this.element.disabled = true;\n  };\n\n  public enable = (): void => {\n    this.element.disabled = false;\n  };\n}\n","import BaseComponent from './BaseComponent';\nimport { InputProps } from '../../utils/types';\n\nexport default class InputField extends BaseComponent {\n  public input = new BaseComponent<HTMLInputElement>({ tag: 'input', classNames: ['input'] });\n  protected toolTip = new BaseComponent({ tag: 'div', classNames: ['tooltip'] });\n  constructor(props: InputProps) {\n    super({ tag: 'div', classNames: ['input-wrapper'] });\n\n    this.createView(props);\n    this.input.on('input', this.onInput);\n  }\n\n  protected createView(props: InputProps) {\n    const label = new BaseComponent({ tag: 'label', classNames: ['label'], text: props.label });\n    const inputBox = new BaseComponent({ tag: 'div', classNames: ['input-box'] });\n    this.input.attr('minlength', props.minlength);\n    this.input.attr('pattern', props.pattern);\n    this.input.attr('type', props.type);\n    if (props.required) {\n      this.input.element.required = true;\n    }\n    if (props.autocomplete) {\n      this.input.attr('autocomplete', 'off');\n    }\n    this.toolTip.setTextContent(props.toolTip);\n\n    inputBox.append(this.input, this.toolTip);\n    this.append(label, inputBox);\n  }\n\n  protected onInput = () => {\n    if (!this.input.element.validity.valid) {\n      this.toolTip.addClass('visible');\n      this.input.addClass('incorrect');\n    } else {\n      this.toolTip.removeClass('visible');\n      this.input.removeClass('incorrect');\n    }\n  };\n\n  // public validInput = (): void => {\n  //   this.addClass('input-invalid');\n  //   if (this.element.validity.valueMissing) {\n  //     this.element.setCustomValidity('Fill this field');\n  //   } else if (!this.element.value[0].match(/[A-Z]/)) {\n  //     this.element.setCustomValidity('The first letter must be in uppercase');\n  //     this.element.reportValidity();\n  //   } else if (this.element.validity.patternMismatch) {\n  //     this.element.setCustomValidity(`The field can contain English alphabet letters or '-'`);\n  //     this.element.reportValidity();\n  //   } else if (this.element.validity.tooShort) {\n  //     const length = this.attr('minlength');\n  //     this.element.setCustomValidity(`Type at least ${length} characters`);\n  //     this.element.reportValidity();\n  //   } else {\n  //     this.element.setCustomValidity('');\n  //     this.removeClass('input-invalid');\n  //   }\n  // };\n}\n","import BaseComponent from './BaseComponent';\n// import Button from './Button';\n\nexport default class Modal extends BaseComponent {\n  protected modalContent = new BaseComponent({ tag: 'div', classNames: ['modal-content'] });\n  protected modalText = new BaseComponent({ tag: 'p', classNames: ['modal-text'] });\n\n  constructor(text: string) {\n    super({ tag: 'div', classNames: ['modal-wrapper'] });\n    // this.createView();\n    this.open(text);\n  }\n\n  protected createView(): void {\n    this.append(this.modalContent);\n  }\n\n  protected setContent(text: string) {\n    const str = text[0].toUpperCase() + text.slice(1);\n    this.modalText.setTextContent(str);\n  }\n\n  protected open = (text: string): void => {\n    this.addClass('overlay-show');\n    this.modalContent.addClass('modal-show');\n    this.setContent(text);\n    // this.modalContent.addClass('modal-show');\n  };\n\n  public close = (): void => {\n    this.addClass('overlay-hide');\n    this.modalContent.addClass('modal-hide');\n    this.on('animationend', () => {\n      this.destroy();\n      // this.removeClass('modal-show');\n      // this.removeClass('modal-hide');\n    });\n\n    // function hideModal() {\n\n    // }\n  };\n}\n","// import BaseComponent from './BaseComponent';\nimport Button from './Button';\nimport Modal from './Modal';\n\nexport default class ModalLogin extends Modal {\n  protected okBtn = new Button({\n    classNames: ['ok-btn'],\n    text: 'Ok',\n  });\n\n  constructor(text: string) {\n    super(text);\n    this.okBtn.on('click', this.close);\n    this.createView();\n  }\n\n  protected createView(): void {\n    super.createView();\n    this.modalContent.append(this.modalText, this.okBtn);\n  }\n}\n","import BaseComponent from './BaseComponent';\nimport Button from './Button';\nimport InputField from './InputField';\n// import Modal from './Modal';\nimport ModalLogin from './ModalLogin';\nimport emitter from '../EventEmitter';\n\nexport default class LoginPage extends BaseComponent {\n  protected modal?: ModalLogin;\n  protected inputs: HTMLInputElement[] = [];\n  protected loginForm = new BaseComponent<HTMLFormElement>({\n    tag: 'form',\n    classNames: ['login-form'],\n  });\n\n  protected inputLogin = new InputField({\n    type: 'text',\n    // placeholder: '',\n    required: true,\n    minlength: '3',\n    pattern: '^[a-zA-Z0-9]{3,}$',\n    toolTip: `Login must be at least three characters long, and can contain letters and numbers`,\n    label: 'Login',\n  });\n\n  protected inputPassword = new InputField({\n    type: 'password',\n    // placeholder: '',\n    required: true,\n    minlength: '8',\n    pattern: '^(?=.*[a-zA-Z])(?=.*\\\\d).{5,}$',\n    toolTip: `Password must be at least 8 characters long, and contain at least one letter and one digit`,\n    label: 'Password',\n    autocomplete: 'off',\n  });\n\n  protected loginBtn = new Button({\n    type: 'submit',\n    classNames: ['login-btn'],\n    text: 'Login',\n  });\n\n  protected infoBtn = new BaseComponent({\n    tag: 'a',\n    classNames: ['info-btn'],\n    // text: 'Info',\n  });\n\n  constructor() {\n    super({ tag: 'div', classNames: ['login-wrapper'] });\n    this.createView();\n    this.loginForm.on('input', this.onChangeForm);\n    this.loginForm.on('submit', this.onSubmitForm);\n    this.infoBtn.on('click', () => emitter.emit('navigate', 'about'));\n    emitter.on('incorrectAuth', this.openModal);\n  }\n\n  protected createView() {\n    const buttons = new BaseComponent({ tag: 'div', classNames: ['buttons-box'] });\n    buttons.append(this.loginBtn, this.infoBtn);\n    this.loginForm.append(this.inputLogin, this.inputPassword, buttons);\n    this.append(this.loginForm);\n    this.loginForm.attr('novalidate', 'true');\n    this.loginBtn.disable();\n    this.inputs.push(this.inputLogin.input.getElement(), this.inputPassword.input.getElement());\n  }\n\n  protected onChangeForm = () => {\n    if (this.inputs.every((input) => input.validity.valid && input.value !== '')) {\n      this.loginBtn.enable();\n    } else {\n      this.loginBtn.disable();\n    }\n  };\n\n  protected onSubmitForm = (event: Event) => {\n    const loginValue = this.inputLogin.input.element.value;\n    const passValue = this.inputPassword.input.element.value;\n    emitter.emit('login', loginValue, passValue);\n    event.preventDefault();\n  };\n\n  protected openModal = (text: unknown) => {\n    if (typeof text !== 'string') {\n      throw new Error('modaltext isn`t string');\n    }\n    this.modal = new ModalLogin(text);\n    this.append(this.modal);\n  };\n}\n","const infoIconSVG = `<svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<circle cx=\"12\" cy=\"12\" r=\"10\" stroke-width=\"1.5\"/>\n<path d=\"M12 17V11\" stroke=\"#356b79\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n<circle cx=\"1\" cy=\"1\" r=\"1\" transform=\"matrix(1 0 0 -1 11 9)\" fill=\"#356b79\"/>\n</svg>`;\n\nconst exitIconSvg = `<svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M21 12L13 12\" stroke=\"#254e58\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M18 15L20.913 12.087V12.087C20.961 12.039 20.961 11.961 20.913 11.913V11.913L18 9\" stroke=\"#254e58\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M16 5V4.5V4.5C16 3.67157 15.3284 3 14.5 3H5C3.89543 3 3 3.89543 3 5V19C3 20.1046 3.89543 21 5 21H14.5C15.3284 21 16 20.3284 16 19.5V19.5V19\" stroke=\"#254e58\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>`;\n\nconst githubSvg = `<svg xmlns=\"http://www.w3.org/2000/svg\"  viewBox=\"0 0 50 50\"><path d=\"M17.791,46.836C18.502,46.53,19,45.823,19,45v-5.4c0-0.197,0.016-0.402,0.041-0.61C19.027,38.994,19.014,38.997,19,39 c0,0-3,0-3.6,0c-1.5,0-2.8-0.6-3.4-1.8c-0.7-1.3-1-3.5-2.8-4.7C8.9,32.3,9.1,32,9.7,32c0.6,0.1,1.9,0.9,2.7,2c0.9,1.1,1.8,2,3.4,2 c2.487,0,3.82-0.125,4.622-0.555C21.356,34.056,22.649,33,24,33v-0.025c-5.668-0.182-9.289-2.066-10.975-4.975 c-3.665,0.042-6.856,0.405-8.677,0.707c-0.058-0.327-0.108-0.656-0.151-0.987c1.797-0.296,4.843-0.647,8.345-0.714 c-0.112-0.276-0.209-0.559-0.291-0.849c-3.511-0.178-6.541-0.039-8.187,0.097c-0.02-0.332-0.047-0.663-0.051-0.999 c1.649-0.135,4.597-0.27,8.018-0.111c-0.079-0.5-0.13-1.011-0.13-1.543c0-1.7,0.6-3.5,1.7-5c-0.5-1.7-1.2-5.3,0.2-6.6 c2.7,0,4.6,1.3,5.5,2.1C21,13.4,22.9,13,25,13s4,0.4,5.6,1.1c0.9-0.8,2.8-2.1,5.5-2.1c1.5,1.4,0.7,5,0.2,6.6c1.1,1.5,1.7,3.2,1.6,5 c0,0.484-0.045,0.951-0.11,1.409c3.499-0.172,6.527-0.034,8.204,0.102c-0.002,0.337-0.033,0.666-0.051,0.999 c-1.671-0.138-4.775-0.28-8.359-0.089c-0.089,0.336-0.197,0.663-0.325,0.98c3.546,0.046,6.665,0.389,8.548,0.689 c-0.043,0.332-0.093,0.661-0.151,0.987c-1.912-0.306-5.171-0.664-8.879-0.682C35.112,30.873,31.557,32.75,26,32.969V33 c2.6,0,5,3.9,5,6.6V45c0,0.823,0.498,1.53,1.209,1.836C41.37,43.804,48,35.164,48,25C48,12.318,37.683,2,25,2S2,12.318,2,25 C2,35.164,8.63,43.804,17.791,46.836z\"/></svg>`;\n\nconst rssSvg = `<svg id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 552.8 205.3\"><style>.st0{fill:#fff}.st1{clip-path:url(#SVGID_2_)}.st2{clip-path:url(#SVGID_4_)}.st3{clip-path:url(#SVGID_6_)}.st4{clip-path:url(#SVGID_8_)}.st5{fill:#fff;stroke:#000;stroke-width:4;stroke-miterlimit:10}.st6{clip-path:url(#SVGID_8_)}.st6,.st7{fill:none;stroke:#000;stroke-width:4;stroke-miterlimit:10}.st8,.st9{clip-path:url(#SVGID_10_)}.st9{fill:none;stroke:#000;stroke-width:4;stroke-miterlimit:10}</style><title>rs_school_js</title><path d=\"M285.4 68l26.3-1.7c.6 4.3 1.7 7.5 3.5 9.8 2.9 3.6 6.9 5.4 12.2 5.4 3.9 0 7-.9 9.1-2.8 2-1.5 3.2-3.9 3.2-6.4 0-2.4-1.1-4.7-3-6.2-2-1.8-6.7-3.6-14.1-5.2-12.1-2.7-20.8-6.3-25.9-10.9-5.1-4.3-8-10.6-7.8-17.3 0-4.6 1.4-9.2 4-13 3-4.3 7.1-7.7 12-9.6 5.3-2.3 12.7-3.5 22-3.5 11.4 0 20.1 2.1 26.1 6.4 6 4.2 9.6 11 10.7 20.3l-26 1.5c-.7-4-2.1-6.9-4.4-8.8s-5.3-2.8-9.2-2.8c-3.2 0-5.6.7-7.2 2-1.5 1.2-2.5 3-2.4 5 0 1.5.8 2.9 2 3.8 1.3 1.2 4.4 2.3 9.3 3.3 12.1 2.6 20.7 5.2 26 7.9 5.3 2.7 9.1 6 11.4 9.9 2.4 4 3.6 8.6 3.5 13.3 0 5.6-1.6 11.2-4.8 15.9-3.3 4.9-7.9 8.7-13.3 11-5.7 2.5-12.9 3.8-21.5 3.8-15.2 0-25.7-2.9-31.6-8.8S286.1 77 285.4 68zM6.3 97.6V8.2h46.1c8.5 0 15.1.7 19.6 2.2 4.4 1.4 8.3 4.3 10.9 8.2 2.9 4.3 4.3 9.3 4.2 14.5.3 8.8-4.2 17.2-11.9 21.6-3 1.7-6.3 2.9-9.7 3.5 2.5.7 5 1.9 7.2 3.3 1.7 1.4 3.1 3 4.4 4.7 1.5 1.7 2.8 3.6 3.9 5.6l13.4 25.9H63L48.2 70.2c-1.9-3.5-3.5-5.8-5-6.9-2-1.4-4.4-2.1-6.8-2.1H34v36.3H6.3zM34 44.4h11.7c2.5-.2 4.9-.6 7.3-1.2 1.8-.3 3.4-1.3 4.5-2.8 2.7-3.6 2.3-8.7-1-11.8-1.8-1.5-5.3-2.3-10.3-2.3H34v18.1zM0 174.2l26.3-1.7c.6 4.3 1.7 7.5 3.5 9.8 2.8 3.6 6.9 5.5 12.2 5.5 3.9 0 7-.9 9.1-2.8 2-1.6 3.2-3.9 3.2-6.4 0-2.4-1.1-4.7-3-6.2-2-1.8-6.7-3.6-14.2-5.2-12.1-2.7-20.8-6.3-25.9-10.9-5.1-4.3-8-10.6-7.8-17.3 0-4.6 1.4-9.2 4-13 3-4.3 7.1-7.7 12-9.6 5.3-2.3 12.7-3.5 22-3.5 11.4 0 20.1 2.1 26.1 6.4s9.5 11 10.6 20.3l-26 1.5c-.7-4-2.1-6.9-4.4-8.8-2.2-1.9-5.3-2.8-9.2-2.7-3.2 0-5.6.7-7.2 2.1-1.6 1.2-2.5 3-2.4 5 0 1.5.8 2.9 2 3.8 1.3 1.2 4.4 2.3 9.3 3.3 12.1 2.6 20.7 5.2 26 7.9 5.3 2.7 9.1 6 11.4 9.9 2.4 4 3.6 8.6 3.6 13.2 0 5.6-1.7 11.1-4.8 15.8-3.3 4.9-7.9 8.7-13.3 11-5.7 2.5-12.9 3.8-21.5 3.8-15.2 0-25.7-2.9-31.6-8.8-5.9-6-9.2-13.4-10-22.4z\"/><path d=\"M133 167.2l24.2 7.3c-1.3 6.1-4 11.9-7.7 17-3.4 4.5-7.9 8-13 10.3-5.2 2.3-11.8 3.5-19.8 3.5-9.7 0-17.7-1.4-23.8-4.2-6.2-2.8-11.5-7.8-16-14.9-4.5-7.1-6.7-16.2-6.7-27.3 0-14.8 3.9-26.2 11.8-34.1s19-11.9 33.4-11.9c11.3 0 20.1 2.3 26.6 6.8 6.4 4.6 11.2 11.6 14.4 21l-24.4 5.4c-.6-2.1-1.5-4.2-2.7-6-1.5-2.1-3.4-3.7-5.7-4.9-2.3-1.2-4.9-1.7-7.5-1.7-6.3 0-11.1 2.5-14.4 7.6-2.5 3.7-3.8 9.6-3.8 17.6 0 9.9 1.5 16.7 4.5 20.4 3 3.7 7.2 5.5 12.7 5.5 5.3 0 9.3-1.5 12-4.4 2.7-3.1 4.7-7.4 5.9-13zm56.5-52.8h27.6v31.3h30.2v-31.3h27.8v89.4h-27.8v-36.2h-30.2v36.2h-27.6v-89.4z\"/><path d=\"M271.3 159.1c0-14.6 4.1-26 12.2-34.1 8.1-8.1 19.5-12.2 34-12.2 14.9 0 26.3 4 34.4 12S364 144 364 158.4c0 10.5-1.8 19-5.3 25.7-3.4 6.6-8.7 12-15.2 15.6-6.7 3.7-15 5.6-24.9 5.6-10.1 0-18.4-1.6-25-4.8-6.8-3.4-12.4-8.7-16.1-15.2-4.1-7-6.2-15.7-6.2-26.2zm27.6.1c0 9 1.7 15.5 5 19.5 3.3 3.9 7.9 5.9 13.7 5.9 5.9 0 10.5-1.9 13.8-5.8s4.9-10.8 4.9-20.8c0-8.4-1.7-14.6-5.1-18.4-3.4-3.9-8-5.8-13.8-5.8-5.1-.2-10 2-13.4 5.9-3.4 3.9-5.1 10.4-5.1 19.5zm93.4-.1c0-14.6 4.1-26 12.2-34.1 8.1-8.1 19.5-12.2 34-12.2 14.9 0 26.4 4 34.4 12S485 144 485 158.4c0 10.5-1.8 19-5.3 25.7-3.4 6.6-8.7 12-15.2 15.6-6.7 3.7-15 5.6-24.9 5.6-10.1 0-18.4-1.6-25-4.8-6.8-3.4-12.4-8.7-16.1-15.2-4.1-7-6.2-15.7-6.2-26.2zm27.6.1c0 9 1.7 15.5 5 19.5 3.3 3.9 7.9 5.9 13.7 5.9 5.9 0 10.5-1.9 13.8-5.8 3.3-3.9 4.9-10.8 4.9-20.8 0-8.4-1.7-14.6-5.1-18.4-3.4-3.9-8-5.8-13.8-5.8-5.1-.2-10.1 2-13.4 5.9-3.4 3.9-5.1 10.4-5.1 19.5z\"/><path d=\"M482.1 114.4h27.6v67.4h43.1v22H482v-89.4z\"/><ellipse transform=\"rotate(-37.001 420.46 67.88)\" class=\"st0\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/><defs><ellipse id=\"SVGID_1_\" transform=\"rotate(-37.001 420.46 67.88)\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/></defs><clipPath id=\"SVGID_2_\"><use xlink:href=\"#SVGID_1_\" overflow=\"visible\"/></clipPath><g class=\"st1\"><path transform=\"rotate(-37.001 420.82 68.353)\" class=\"st0\" d=\"M330.9-14.2h179.8v165.1H330.9z\"/><g id=\"Layer_2_1_\"><defs><path id=\"SVGID_3_\" transform=\"rotate(-37.001 420.82 68.353)\" d=\"M330.9-14.2h179.8v165.1H330.9z\"/></defs><clipPath id=\"SVGID_4_\"><use xlink:href=\"#SVGID_3_\" overflow=\"visible\"/></clipPath><g id=\"Layer_1-2\" class=\"st2\"><ellipse transform=\"rotate(-37.001 420.46 67.88)\" class=\"st0\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/><defs><ellipse id=\"SVGID_5_\" transform=\"rotate(-37.001 420.46 67.88)\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/></defs><clipPath id=\"SVGID_6_\"><use xlink:href=\"#SVGID_5_\" overflow=\"visible\"/></clipPath><g class=\"st3\"><path transform=\"rotate(-37 420.799 68.802)\" class=\"st0\" d=\"M357.8 17h125.9v103.7H357.8z\"/><defs><path id=\"SVGID_7_\" transform=\"rotate(-37 420.799 68.802)\" d=\"M357.8 17h125.9v103.7H357.8z\"/></defs><clipPath id=\"SVGID_8_\"><use xlink:href=\"#SVGID_7_\" overflow=\"visible\"/></clipPath><g class=\"st4\"><ellipse transform=\"rotate(-37.001 420.46 67.88)\" class=\"st5\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/></g><path transform=\"rotate(-37 420.799 68.802)\" class=\"st6\" d=\"M357.8 17h125.9v103.7H357.8z\"/><ellipse transform=\"rotate(-37.001 420.46 67.88)\" class=\"st7\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/><path transform=\"rotate(-37 420.799 68.802)\" class=\"st0\" d=\"M357.8 17h125.9v103.7H357.8z\"/><defs><path id=\"SVGID_9_\" transform=\"rotate(-37 420.799 68.802)\" d=\"M357.8 17h125.9v103.7H357.8z\"/></defs><clipPath id=\"SVGID_10_\"><use xlink:href=\"#SVGID_9_\" overflow=\"visible\"/></clipPath><g class=\"st8\"><ellipse transform=\"rotate(-37.001 420.46 67.88)\" class=\"st5\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/></g><path transform=\"rotate(-37 420.799 68.802)\" class=\"st9\" d=\"M357.8 17h125.9v103.7H357.8z\"/><path transform=\"rotate(-37.001 420.82 68.353)\" class=\"st7\" d=\"M330.9-14.2h179.8v165.1H330.9z\"/></g><ellipse transform=\"rotate(-37.001 420.46 67.88)\" class=\"st7\" cx=\"420.5\" cy=\"67.9\" rx=\"63\" ry=\"51.8\"/><path d=\"M392.4 61.3l10-7 12.3 17.5c2.1 2.8 3.7 5.8 4.9 9.1.7 2.5.5 5.2-.5 7.6-1.3 3-3.4 5.5-6.2 7.3-3.3 2.3-6.1 3.6-8.5 4-2.3.4-4.7 0-6.9-1-2.4-1.2-4.5-2.9-6.1-5.1l8.6-8c.7 1.1 1.6 2.1 2.6 2.9.7.5 1.5.8 2.4.8.7 0 1.4-.3 1.9-.7 1-.6 1.7-1.8 1.6-3-.3-1.7-1-3.4-2.1-4.7l-14-19.7zm30 11.1l9.1-7.2c1 1.2 2.3 2.1 3.7 2.6 2 .6 4.1.2 5.8-1.1 1.2-.8 2.2-1.9 2.6-3.3.6-1.8-.4-3.8-2.2-4.4-.3-.1-.6-.2-.9-.2-1.2-.1-3.3.4-6.4 1.7-5.1 2.1-9.1 2.9-12.1 2.6-2.9-.3-5.6-1.8-7.2-4.3-1.2-1.7-1.8-3.7-1.9-5.7 0-2.3.6-4.6 1.9-6.5 1.9-2.7 4.2-5 7-6.8 4.2-2.9 7.9-4.3 11.1-4.3 3.2 0 6.2 1.5 9 4.6l-9 7.1c-1.8-2.3-5.2-2.8-7.5-1l-.3.3c-1 .6-1.7 1.5-2.1 2.6-.3.8-.1 1.7.4 2.4.4.5 1 .9 1.7.9.8.1 2.2-.3 4.2-1.2 5-2.1 8.8-3.3 11.4-3.7 2.2-.4 4.5-.2 6.6.7 1.9.8 3.5 2.2 4.6 3.9 1.4 2 2.2 4.4 2.3 6.9.1 2.6-.6 5.1-2 7.3-1.8 2.7-4.1 5-6.8 6.8-5.5 3.8-10 5.4-13.6 4.8-3.9-.6-7.1-2.6-9.4-5.5z\"/></g></g></g></svg>`;\n\nexport { infoIconSVG, exitIconSvg, githubSvg, rssSvg };\n","import BaseComponent from './BaseComponent';\nimport { Props } from '../../utils/types';\nimport emitter from '../EventEmitter';\nimport { infoIconSVG, exitIconSvg } from '../../utils/icons';\nimport state from '../State';\n\nexport default class Header extends BaseComponent {\n  protected currUser = new BaseComponent({ tag: 'p', classNames: ['curr-user'] });\n  protected infoBtn = new BaseComponent({\n    tag: 'a',\n    classNames: ['main-info-btn'],\n  });\n  protected logoutBtn = new BaseComponent({\n    tag: 'a',\n    classNames: ['logout-btn'],\n  });\n  constructor(props: Props) {\n    super(props);\n    this.createView();\n    this.logoutBtn.on('click', () => emitter.emit('logout'));\n    this.infoBtn.on('click', () => emitter.emit('navigate', 'about'));\n  }\n  protected createView() {\n    const buttons = new BaseComponent({ tag: 'div', classNames: ['buttons'] });\n    this.infoBtn.html(infoIconSVG);\n    this.logoutBtn.html(exitIconSvg);\n    buttons.append(this.infoBtn, this.logoutBtn);\n    const title = new BaseComponent({ tag: 'h1', classNames: ['header-title'], text: 'Fun Chat' });\n    this.append(this.currUser, title, buttons);\n\n    const { login } = state.getUser();\n    console.log('login=', login);\n    this.currUser.html(`<span>${login}</span>`);\n  }\n}\n","import BaseComponent from './BaseComponent';\nimport { Props } from '../../utils/types';\nimport { githubSvg, rssSvg } from '../../utils/icons';\n\nexport default class Footer extends BaseComponent {\n  constructor(props: Props) {\n    super(props);\n    this.createView();\n  }\n  protected createView() {\n    const iconGithub = new BaseComponent({ tag: 'a', classNames: ['icon-github'] });\n    iconGithub.attr('href', 'https://github.com/gryzun33');\n    iconGithub.attr('target', '_blank');\n    iconGithub.html(githubSvg);\n    const year = new BaseComponent({ tag: 'p', classNames: ['year'] });\n    year.html(`&copy;2024`);\n    const iconSchool = new BaseComponent({ tag: 'a', classNames: ['icon-school'] });\n    iconSchool.attr('href', 'https://rs.school/');\n    iconSchool.attr('target', '_blank');\n    iconSchool.html(rssSvg);\n    this.append(iconGithub, year, iconSchool);\n  }\n}\n","import BaseComponent from './BaseComponent';\nimport { Props } from '../../utils/types';\nimport emitter from '../EventEmitter';\n// import state from '../State';\n\nexport default class Users extends BaseComponent {\n  protected usersMap: Map<string, BaseComponent> = new Map();\n  public userSearch = new BaseComponent<HTMLInputElement>({\n    tag: 'input',\n    classNames: ['user-search'],\n  });\n\n  public activeList = new BaseComponent<HTMLUListElement>({\n    tag: 'ul',\n    classNames: ['active-list'],\n  });\n  public inactiveList = new BaseComponent<HTMLUListElement>({\n    tag: 'ul',\n    classNames: ['inactive-list'],\n  });\n\n  public userList = new BaseComponent<HTMLElement>({ tag: 'div', classNames: ['users-list'] });\n  constructor(props: Props) {\n    super(props);\n    this.createView();\n    // emitter.on('external-login', this.addActiveUser);\n    // emitter.on('external-logout', this.addInactiveUser);\n    // emitter.on('update-notifications', this.updateNotifications);\n    this.activeList.on('click', this.onClickUsers);\n    this.inactiveList.on('click', this.onClickUsers);\n    this.userSearch.on('input', this.searchUsers);\n    this.usersMap.clear();\n\n    this.emitterMap = new Map([\n      ['external-login', this.addActiveUser],\n      ['external-logout', this.addInactiveUser],\n      ['update-notifications', this.updateNotifications],\n    ]);\n    this.addUnsubscribers();\n  }\n\n  protected createView() {\n    this.userList.append(this.activeList, this.inactiveList);\n    this.append(this.userSearch, this.userList);\n    this.userSearch.attr('placeholder', 'Search...');\n  }\n\n  // protected createUsersList = (data: unknown) => {\n  //   console.log('list=', data);\n  //   if (!Array.isArray(data)) {\n  //     throw new Error(`data isn't array`);\n  //   }\n\n  //   data.forEach((user: UserResponse) => {\n  //     const userItem = this.getNewUserItem(user.login);\n\n  //     if (user.isLogined) {\n  //       userItem.addClass('active-user');\n  //     }\n  //     if (user.isLogined) {\n  //       this.activeList.append(userItem);\n  //     } else {\n  //       this.inactiveList.append(userItem);\n  //     }\n  //   });\n  // };\n\n  protected addActiveUser = (userLogin: unknown, notifications: unknown) => {\n    if (typeof userLogin !== 'string' || typeof notifications !== 'number') {\n      throw new Error(`arguments don't match their types`);\n    }\n    let userItem = this.usersMap.get(userLogin);\n    if (!userItem) {\n      // console.log('NEWEXTERNALUSER', userLogin);\n      userItem = this.getNewUserItem(userLogin, notifications);\n    }\n\n    userItem.addClass('active-user');\n    this.activeList.append(userItem);\n  };\n\n  protected addInactiveUser = (userLogin: unknown, notifications: unknown) => {\n    if (typeof userLogin !== 'string' || typeof notifications !== 'number') {\n      throw new Error(`arguments don't match their types`);\n    }\n    let userItem = this.usersMap.get(userLogin);\n    if (!userItem) {\n      userItem = this.getNewUserItem(userLogin, notifications);\n    }\n    userItem.removeClass('active-user');\n    this.inactiveList.append(userItem);\n  };\n\n  protected getNewUserItem(login: string, notifications: number): BaseComponent {\n    const userItem = new BaseComponent<HTMLLIElement>({\n      tag: 'li',\n      classNames: ['user-item'],\n    });\n    const userLogin = new BaseComponent({\n      tag: 'div',\n      classNames: ['user-text'],\n      text: login,\n    });\n    const notificationsElem = new BaseComponent({\n      tag: 'div',\n      classNames: ['user-notifications'],\n      text: String(notifications),\n    });\n\n    if (notifications === 0) {\n      notificationsElem.addClass('hidden');\n    }\n    userItem.append(userLogin, notificationsElem);\n    userItem.attr('data-login', `${login}`);\n    this.usersMap.set(login, userItem);\n    console.log('usermap===', this.usersMap);\n    // emitter.emit('get-notifications', login);\n    return userItem;\n  }\n\n  protected onClickUsers = (e: Event) => {\n    const { target } = e;\n    if (!(target instanceof HTMLElement)) {\n      throw new Error(`target isn't HTMLEelement`);\n    }\n    const userElement = target.closest('.user-item');\n    if (!userElement) {\n      throw new Error(`userElement is null`);\n    }\n    const login = userElement.getAttribute('data-login');\n    if (userElement.closest('.active-list')) {\n      emitter.emit('set-dialog-user', login, true);\n    } else if (userElement.closest('.inactive-list')) {\n      emitter.emit('set-dialog-user', login, false);\n    }\n\n    this.resetUserList();\n  };\n\n  protected searchUsers = () => {\n    console.log('input');\n    const value = this.userSearch.getElement().value.toLowerCase();\n    const users = Array.from(this.usersMap.values());\n    if (value.trim() === '') {\n      users.forEach((user) => user.removeClass('user-hidden'));\n    } else {\n      users.forEach((user) => {\n        const login = user.attr('data-login');\n        if (!login) {\n          throw new Error('id is null');\n        }\n        const loginValue = login.toLowerCase();\n        if (!loginValue.includes(value)) {\n          user.addClass('user-hidden');\n        } else {\n          user.removeClass('user-hidden');\n        }\n      });\n    }\n  };\n\n  protected resetUserList = () => {\n    const users = Array.from(this.usersMap.values());\n    users.forEach((user) => user.removeClass('user-hidden'));\n    this.userSearch.getElement().value = '';\n  };\n\n  public updateNotifications = (login: unknown, notifications: unknown) => {\n    if (typeof login !== 'string' || typeof notifications !== 'number') {\n      throw new Error(`arguments don't match their types`);\n    }\n    // console.log('LOGIN=', login);\n    // const userElement = document.querySelector(`[data-login=${login}]`);\n    // if (!userElement) {\n    //   throw new Error(`notificationElem is null`);\n    // }\n    // console.log('ELEMENT', userElement);\n    // const notificationElem = userElement.querySelector('.user-notifications');\n\n    // if (!notificationElem) {\n    //   throw new Error(`notificationElem is null`);\n    // }\n    // notificationElem.textContent = String(notifications);\n    // if (notifications > 0) {\n    //   notificationElem.classList.remove('hidden');\n    // } else {\n    //   notificationElem.classList.add('hidden');\n    // }\n\n    console.log('MAP=', this.usersMap);\n    const userComponent = this.usersMap.get(login);\n    console.log('usercomponent=', userComponent);\n    if (!userComponent) {\n      throw new Error(`user is undefined`);\n    }\n\n    const notificationElem = userComponent.children[1];\n    notificationElem.setTextContent(String(notifications));\n    if (notifications > 0) {\n      notificationElem.removeClass('hidden');\n    } else {\n      notificationElem.addClass('hidden');\n    }\n  };\n}\n","import BaseComponent from './BaseComponent';\nimport Button from './Button';\n\nexport default class ContextMenu extends BaseComponent {\n  protected editBtn = new Button({\n    type: 'text',\n    classNames: ['edit-btn'],\n    text: 'Edit',\n  });\n\n  protected deleteBtn = new Button({\n    type: 'text',\n    classNames: ['delete-btn'],\n    text: 'Delete',\n  });\n  constructor() {\n    super({ tag: 'div', classNames: ['context-menu'] });\n    this.createView();\n  }\n\n  protected createView() {\n    this.append(this.editBtn, this.deleteBtn);\n  }\n}\n","import { MessageProps, MessageStatus } from '../../utils/types';\nimport BaseComponent from './BaseComponent';\nimport ContextMenu from './ContextMenu';\n// import emitter from '../EventEmitter';\n\nexport default class Message extends BaseComponent {\n  protected id: string = '';\n  protected contextMenu?: ContextMenu;\n  protected msgText = new BaseComponent({ tag: 'p', classNames: ['msg-text'] });\n  protected msgStatus = new BaseComponent({ tag: 'p', classNames: ['msg-status'] });\n  constructor(msg: MessageProps) {\n    super({ tag: 'div', classNames: ['message'] });\n    this.id = msg.id;\n    this.createView(msg);\n  }\n\n  protected createView(msg: MessageProps) {\n    this.attr('id', msg.id);\n    const topInfo = new BaseComponent({ tag: 'div', classNames: ['msg-top-info'] });\n    const authorName = msg.author ? 'you' : msg.dialogUser;\n    const author = new BaseComponent({ tag: 'p', classNames: ['msg-author'], text: authorName });\n    const date = new BaseComponent({ tag: 'p', classNames: ['msg-date'], text: msg.date });\n    topInfo.append(author, date);\n    this.msgText.setTextContent(msg.text);\n    if (msg.author) {\n      this.msgStatus.setTextContent(msg.status);\n      this.on('contextmenu', this.onContextMenuHandler);\n    }\n\n    this.append(topInfo, this.msgText, this.msgStatus);\n    if (msg.author) {\n      this.addClass('message-right');\n    } else {\n      this.addClass('message-left');\n    }\n  }\n\n  public setStatusDelivered() {\n    this.msgStatus.setTextContent(MessageStatus.Delivered);\n  }\n\n  public setStatusReaded() {\n    this.msgStatus.setTextContent(MessageStatus.Readed);\n  }\n\n  protected onContextMenuHandler = (e: Event) => {\n    console.log('contextmenu');\n    e.preventDefault();\n    this.contextMenu = new ContextMenu();\n    this.append(this.contextMenu);\n    if (this.contextMenu) {\n      document.addEventListener('click', () => this.contextMenu?.destroy(), { once: true });\n    }\n  };\n\n  // protected removeContextMenu = () => {\n  //   this.contextMenu?.destroy();\n  // };\n}\n","import BaseComponent from './BaseComponent';\nimport { Props, MessageProps, MessageStatus } from '../../utils/types';\nimport emitter from '../EventEmitter';\nimport Message from './Message';\nimport { isMessageProps } from '../../utils/helpers';\n// import { Listener } from '../../utils/types';\n\nenum UserStatus {\n  online = 'online',\n  offline = 'offline',\n}\n\nenum DialogStatus {\n  noDialogUser = 'no-dialog-user',\n  noMessages = 'no-messages',\n  messages = 'messages',\n}\n\nexport default class Dialog extends BaseComponent {\n  protected messagesMap: Map<string, Message> = new Map();\n  protected isDivider: boolean = false;\n  protected isProgrammScroll: boolean = false;\n  protected dialogStatus: string = DialogStatus.noDialogUser;\n\n  // protected emitterMap: Map<string, Listener> = new Map([[]]);\n  protected divider = new BaseComponent({\n    tag: 'div',\n    classNames: ['divider'],\n    text: 'New messages',\n  });\n  protected dialogUserLogin = new BaseComponent({ tag: 'p', classNames: ['dialog-user-login'] });\n  protected dialogUserStatus = new BaseComponent({\n    tag: 'p',\n    classNames: ['dialog-user-status'],\n    text: ``,\n  });\n  protected messagesBox = new BaseComponent({ tag: 'div', classNames: ['messages-box'] });\n  protected messages = new BaseComponent({ tag: 'div', classNames: ['messages'] });\n  protected placeholder = new BaseComponent({\n    tag: 'div',\n    classNames: ['placeholder'],\n    text: `Select a user to send a message to...`,\n  });\n\n  constructor(props: Props) {\n    super(props);\n    this.createView();\n    // emitter.on('set-dialog-user', this.setDialogUser);\n    // emitter.on('change-status', this.changeStatus);\n    // emitter.on('add-message', this.addNewMessage);\n    // emitter.on('add-messages', this.addMessages);\n    // emitter.on('delivered', this.setStatusDelivered);\n    // emitter.on('readed', this.setStatusReaded);\n    // emitter.on('send-message', this.onChangeMessages);\n    this.messages.on('click', this.onChangeMessages);\n    this.messages.on('scroll', this.onScrollMessages);\n    this.messages.on('scrollend', this.onScrollEndHandler);\n\n    this.emitterMap = new Map([\n      ['set-dialog-user', this.setDialogUser],\n      ['change-status', this.changeStatus],\n      ['add-message', this.addNewMessage],\n      ['add-messages', this.addMessages],\n      ['delivered', this.setStatusDelivered],\n      ['readed', this.setStatusReaded],\n      ['send-message', this.onChangeMessages],\n    ]);\n    this.emitterMap.forEach((listener, eventName) => {\n      this.unsubscribes.push(emitter.on(eventName, listener));\n    });\n    console.log('unubscribes', this.unsubscribes);\n  }\n\n  protected createView() {\n    const dialogUser = new BaseComponent({ tag: 'div', classNames: ['dialog-user'] });\n    dialogUser.append(this.dialogUserLogin, this.dialogUserStatus);\n\n    this.messagesBox.append(this.placeholder, this.messages);\n    this.append(dialogUser, this.messagesBox);\n  }\n\n  protected onScrollEndHandler = () => {\n    if (this.isProgrammScroll) {\n      this.isProgrammScroll = false;\n    }\n  };\n\n  protected setDialogUser = (login: unknown, status: unknown) => {\n    console.log('setUSER');\n    if (typeof login !== 'string' || typeof status !== 'boolean') {\n      throw new Error(`login or status does not match type `);\n    }\n    this.dialogUserLogin.setTextContent(login);\n\n    // if (!status) {\n    //   this.dialogUserStatus.addClass('status-inactive');\n    // } else {\n    //   this.dialogUserStatus.removeClass('status-inactive');\n    // }\n    this.changeStatus(status);\n    // this.enableInput();\n    this.changePlaceholder();\n\n    this.dialogStatus = DialogStatus.noMessages;\n  };\n\n  protected changePlaceholder = () => {\n    this.placeholder.removeClass('placeholder-hidden');\n    this.placeholder.setTextContent(`Please write your first message...`);\n  };\n\n  protected changeStatus = (status: unknown) => {\n    if (typeof status !== 'boolean') {\n      throw new Error(`status isn't boolean`);\n    }\n    this.dialogUserStatus.setTextContent(status ? UserStatus.online : UserStatus.offline);\n    if (!status) {\n      this.dialogUserStatus.addClass('status-inactive');\n    } else {\n      this.dialogUserStatus.removeClass('status-inactive');\n    }\n  };\n\n  protected addNewMessage = (msg: unknown) => {\n    if (!isMessageProps(msg)) {\n      throw new Error('type of msg is not MessageProps');\n    }\n\n    if (this.dialogStatus === DialogStatus.noDialogUser) {\n      return;\n    }\n\n    if (this.dialogStatus === DialogStatus.noMessages) {\n      this.removePlaceholder();\n    }\n    if (!msg.author && !this.isDivider) {\n      // this.isDivider = true;\n      this.showDivider();\n    }\n\n    this.addMessage(msg);\n    this.scrollMessages(true);\n  };\n\n  protected addMessages = (messages: unknown) => {\n    if (!Array.isArray(messages)) {\n      throw new Error(`messages is not array`);\n    }\n\n    this.destroyMessages();\n\n    if (messages.length === 0) {\n      return;\n    }\n    this.removePlaceholder();\n\n    messages.forEach((msg: MessageProps) => {\n      console.log(msg.status);\n      if (!msg.author && msg.status === MessageStatus.Delivered && !this.isDivider) {\n        this.showDivider();\n      }\n      this.addMessage(msg);\n      // const messageComp = new Message(msg);\n      // this.messages.append(messageComp);\n    });\n    this.scrollMessages(false);\n  };\n\n  protected showDivider = () => {\n    this.isDivider = true;\n    this.messages.append(this.divider);\n    this.divider.removeClass('hidden');\n  };\n\n  protected removePlaceholder = () => {\n    this.dialogStatus = DialogStatus.messages;\n    this.placeholder.addClass('placeholder-hidden');\n  };\n\n  protected addMessage(msg: MessageProps) {\n    const messageComp = new Message(msg);\n    this.messages.append(messageComp);\n    this.messagesMap.set(msg.id, messageComp);\n  }\n\n  protected setStatusDelivered = (id: unknown) => {\n    if (typeof id !== 'string') {\n      throw new Error(`id is not string`);\n    }\n    const messageComp = this.messagesMap.get(id);\n    if (!messageComp) {\n      throw new Error(`messageComponent is undefined`);\n    }\n    messageComp.setStatusDelivered();\n  };\n\n  protected setStatusReaded = (id: unknown) => {\n    if (typeof id !== 'string') {\n      throw new Error(`id is not string`);\n    }\n    const messageComp = this.messagesMap.get(id);\n    if (!messageComp) {\n      throw new Error(`messageComponent is undefined`);\n    }\n    messageComp.setStatusReaded();\n  };\n\n  protected destroyMessages = () => {\n    // const messages = this.messagesMap.values();\n    this.messagesMap.forEach((message) => {\n      message.destroy();\n    });\n    this.messagesMap.clear();\n    this.hideDivider();\n  };\n\n  protected hideDivider = () => {\n    this.isDivider = false;\n    this.divider.addClass('hidden');\n  };\n\n  protected onChangeMessages = () => {\n    // if (this.isProgrammScroll) {\n    //   this.isProgrammScroll = false;\n    // }\n    if (this.isDivider) {\n      this.hideDivider();\n      emitter.emit('set-readed');\n    }\n  };\n\n  protected onScrollMessages = () => {\n    console.log('xxxxx');\n    if (!this.isProgrammScroll) {\n      this.onChangeMessages();\n    }\n  };\n\n  public scrollMessages(isSmooth: boolean) {\n    this.isProgrammScroll = true;\n    console.log('scrolltrue');\n    // this.messages.off('scroll', this.onChangeMessages);\n    // console.log('scrolloff');\n    // this.isProgrammScroll = true;\n    // if (!container || !divider) return;\n    const container = this.messages.element;\n    const divider = this.divider.element;\n\n    if (this.isDivider) {\n      const containerRect = container.getBoundingClientRect();\n      const dividerRect = divider.getBoundingClientRect();\n\n      // const remainingHeight = container.scrollHeight - container.clientHeight;\n      // if (dividerRect.top >= containerRect.top && remainingHeight > containerRect.height) {\n      //   container.scrollTo({\n      //     top: container.scrollTop + (dividerRect.top - containerRect.top) - 10,\n      //     behavior: 'smooth',\n      //   });\n      // }\n\n      if (dividerRect.top >= containerRect.top) {\n        container.scrollTo({\n          top: container.scrollTop + (dividerRect.top - containerRect.top) - 10,\n          behavior: isSmooth ? 'smooth' : 'auto',\n        });\n      }\n    } else {\n      const isScrollable = container.scrollHeight > container.clientHeight;\n      if (isScrollable) {\n        container.scrollTo({\n          top: container.scrollHeight - container.clientHeight,\n          behavior: isSmooth ? 'smooth' : 'auto',\n        });\n      }\n    }\n    // if (document.hasFocus()) {\n    //   setTimeout(() => {\n    //     this.isProgrammScroll = false;\n    //     console.log('scrollfalse');\n    //   }, 1000);\n    //   console.log('focus');\n    // } else {\n    //   console.log('nofocus');\n    // }\n  }\n}\n","import BaseComponent from './BaseComponent';\nimport Button from './Button';\nimport { Props } from '../../utils/types';\nimport emitter from '../EventEmitter';\n\nexport default class NewMessage extends BaseComponent {\n  protected messageForm = new BaseComponent<HTMLFormElement>({\n    tag: 'form',\n    classNames: ['message-form'],\n  });\n  protected messageInput = new BaseComponent<HTMLInputElement>({\n    tag: 'input',\n    classNames: ['message-input'],\n  });\n\n  protected sendBtn = new Button({\n    type: 'submit',\n    classNames: ['send-btn'],\n    text: 'Send',\n  });\n\n  constructor(props: Props) {\n    super(props);\n    this.createView();\n    emitter.on('set-dialog-user', this.enableInput);\n    this.messageInput.on('input', this.onInputMessage);\n    this.messageForm.on('submit', this.onSubmitForm);\n  }\n\n  protected createView() {\n    this.messageForm.append(this.messageInput, this.sendBtn);\n    this.append(this.messageForm);\n\n    this.messageInput.attr('type', 'text');\n    this.messageInput.attr('placeholder', 'Write a message...');\n    this.messageInput.getElement().disabled = true;\n    this.sendBtn.disable();\n  }\n\n  protected enableInput = () => {\n    this.messageInput.getElement().disabled = false;\n  };\n\n  protected onInputMessage = () => {\n    const { value } = this.messageInput.getElement();\n    if (value.trim() === '') {\n      this.sendBtn.disable();\n    } else {\n      this.sendBtn.enable();\n    }\n  };\n\n  protected onSubmitForm = (e: Event) => {\n    e.preventDefault();\n    const message = this.messageInput.getElement().value;\n    this.messageInput.getElement().value = '';\n    this.sendBtn.disable();\n    emitter.emit('send-message', message);\n  };\n}\n","import BaseComponent from './BaseComponent';\n// import Main from './Main';\nimport Header from './Header';\nimport Footer from './Footer';\nimport Users from './Users';\nimport Dialog from './Dialog';\nimport NewMessage from './NewMessage';\n\n// import Button from './Button';\n// import emitter from '../EventEmitter';\n\nexport default class MainPage extends BaseComponent {\n  constructor() {\n    super({ tag: 'div', classNames: ['main-wrapper'] });\n    this.createView();\n  }\n\n  protected createView() {\n    // const button = new Button({ text: 'to Login' });\n    // this.append(button);\n    // button.on('click', () => emitter.emit('navigate', 'login'));\n\n    const header = new Header({ tag: 'header', classNames: ['header'] });\n    const footer = new Footer({ tag: 'footer', classNames: ['footer'] });\n\n    const main = new BaseComponent({ tag: 'main', classNames: ['main'] });\n    const users = new Users({ tag: 'div', classNames: ['users-wrapper'] });\n    const messagesWrapper = new BaseComponent({ tag: 'div', classNames: ['messages-wrapper'] });\n    const dialogWrapper = new Dialog({ tag: 'div', classNames: ['dialog-wrapper'] });\n    const newMessage = new NewMessage({ tag: 'div', classNames: ['new-message-wrapper'] });\n    messagesWrapper.append(dialogWrapper, newMessage);\n    main.append(users, messagesWrapper);\n    this.append(header, main, footer);\n  }\n}\n","import BaseComponent from './BaseComponent';\n// import Button from './Button';\nimport emitter from '../EventEmitter';\n\nexport default class AboutPage extends BaseComponent {\n  protected backBtn = new BaseComponent({\n    tag: 'a',\n    classNames: ['back-btn'],\n    text: 'Back',\n  });\n  constructor() {\n    super({ tag: 'div', classNames: ['about-wrapper'] });\n    this.createView();\n    this.backBtn.on('click', () => emitter.emit('navigate', 'back'));\n  }\n\n  protected createView() {\n    const title = new BaseComponent({ tag: 'h2', classNames: ['about-title'], text: 'Fun Chat' });\n    const text = new BaseComponent({ tag: 'p', classNames: ['about-text'] });\n    text.setTextContent(\n      'This application was developed as part of the RSSchool course in 2023Q3. The goal of the project was to create a web application for communication and message exchange between users'\n    );\n    const author = new BaseComponent({\n      tag: 'a',\n      classNames: ['about-author'],\n      text: 'Olga Yakusheva',\n    });\n    author.attr('href', 'https://gryzun33.github.io/rsschool-cv/');\n    author.attr('target', '_blank');\n    // const button = new Button({ text: 'to Main' });\n    this.append(title, text, author, this.backBtn);\n  }\n\n  // The \"Fan Chat\" application was developed as part of the RSSchool course in 2023Q3. The goal of the project was to create a web application for communication and message exchange between users.\n}\n","import BaseComponent from './BaseComponent';\nimport Modal from './Modal';\n\nexport default class ModalServer extends Modal {\n  constructor(text: string) {\n    super(text);\n    this.createView();\n  }\n\n  protected createView(): void {\n    super.createView();\n    const loader = new BaseComponent({ tag: 'div', classNames: ['loader'] });\n    this.modalContent.append(this.modalText, loader);\n  }\n}\n","import BaseComponent from './View/BaseComponent';\n// import View from './View';\nimport Router from './Router';\n// import State from './State';\nimport Controller from './Controller';\nimport LoginPage from './View/LoginPage';\nimport MainPage from './View/MainPage';\nimport AboutPage from './View/AboutPage';\nimport ModalServer from './View/ModalServer';\nimport emitter from './EventEmitter';\n\nexport default class App {\n  protected page: string = '';\n  protected root = new BaseComponent({ tag: 'div', classNames: ['wrapper'] });\n  private router: Router;\n  private currPage?: BaseComponent;\n  protected modal?: ModalServer;\n\n  // private routerMap: Map = new Map([\n  //   ['/login', new LoginPage()],\n  //   ['/main', new MainPage()],\n  //   ['/about', new AboutPage()],\n  // ]);\n  // private model: Model;\n\n  // private view: View;\n  protected controller = new Controller();\n  constructor() {\n    // console.log(controller);\n    const routes = this.createRoutes();\n    this.router = new Router(routes);\n    // console.log(this.router);\n    emitter.on('disconnect', this.openModal);\n    emitter.on('connect', this.closeModal);\n  }\n\n  start() {\n    document.body.append(this.root.element);\n    this.router.init();\n  }\n\n  openModal = () => {\n    this.modal = new ModalServer(`Connecting to the server`);\n    this.root.append(this.modal);\n  };\n\n  closeModal = () => {\n    this.modal?.close();\n  };\n  createRoutes() {\n    return [\n      // {\n      //   path: ``,\n      //   callback: () => this.setContent(new LoginPage()),\n      // },\n      {\n        path: `login`,\n        callback: () => this.setContent(new LoginPage(), 'login'),\n      },\n      {\n        path: `main`,\n        callback: () => this.setContent(new MainPage(), 'main'),\n      },\n      {\n        path: `about`,\n        callback: () => this.setContent(new AboutPage(), 'about'),\n      },\n    ];\n  }\n  setContent(newPage: BaseComponent, page: string) {\n    if (this.currPage) {\n      this.currPage.destroy();\n    }\n    this.currPage = newPage;\n    this.root.append(newPage);\n    if (this.page === 'about' && page === 'main') {\n      this.controller.externalUsersRequest();\n    }\n    this.page = page;\n  }\n}\n","import './style.scss';\nimport App from './app/components/App';\n\nconst app = new App();\napp.start();\n\nconsole.log('hello');\n"],"names":["EventEmitter","__publicField","event","listener","l","args","eventListeners","emitter","BaseComponent","props","eventName","cssClasses","cssClass","text","className","compChildren","child","newComp","index","name","value","prop","selector","eventType","callback","html","unsubscriber","handler","StorageService","keyPrefix","key","resultKey","data","storageKey","storage","Router","routes","url","path","isUser","route","elem","WebSocketManager","dataHandler","checkAuthorized","_a","message","MessageStatus","formatDate","timestamp","date","day","month","year","hours","minutes","seconds","isMessageProps","obj","State","user","userData","login","notifications","isLogined","msg","author","dialogUser","status","msgProps","state","msgs","messages","statusResponse","ERRORS","ErrorHandler","DataHandler","dataStr","id","unReaded","idResponse","password","users","REQUESTS","Controller","requestId","loginRequest","request","messagesId","activeUsersRequest","inactiveUsersRequest","_b","Button","InputField","label","inputBox","Modal","str","ModalLogin","LoginPage","input","loginValue","passValue","buttons","infoIconSVG","exitIconSvg","githubSvg","rssSvg","Header","title","Footer","iconGithub","iconSchool","Users","userLogin","userItem","target","userElement","userComponent","notificationElem","notificationsElem","ContextMenu","Message","topInfo","authorName","Dialog","messageComp","isSmooth","container","divider","containerRect","dividerRect","NewMessage","MainPage","header","footer","main","messagesWrapper","dialogWrapper","newMessage","AboutPage","ModalServer","loader","App","newPage","page","app"],"mappings":"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"}